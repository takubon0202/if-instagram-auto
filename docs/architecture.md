# Instagram自動投稿システム アーキテクチャ v3.0

## 概要

投稿が蓄積されていくブログ型Instagramシステム。
自動投稿のたびにコンテンツが追加され、フィード/グリッド表示で閲覧可能。

## システム構成

```
┌─────────────────────────────────────────────────────────────┐
│                    if塾 Instagram System                     │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐     │
│  │   Gemini    │───▶│  Workflow   │───▶│  posts.json │     │
│  │   API       │    │   Engine    │    │  (蓄積DB)   │     │
│  └─────────────┘    └─────────────┘    └─────────────┘     │
│                                               │             │
│                                               ▼             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │              Frontend (GitHub Pages)                 │   │
│  ├─────────────────────────────────────────────────────┤   │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐             │   │
│  │  │ Stories │  │  Feed   │  │  Grid   │             │   │
│  │  │   Bar   │  │  View   │  │  View   │             │   │
│  │  └─────────┘  └─────────┘  └─────────┘             │   │
│  │       │            │            │                   │   │
│  │       └────────────┴────────────┘                   │   │
│  │                    │                                │   │
│  │              ┌─────┴─────┐                          │   │
│  │              │   Modal   │                          │   │
│  │              │  Viewer   │                          │   │
│  │              └───────────┘                          │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## データ構造

### posts.json（蓄積型）

```json
{
  "metadata": {
    "version": "3.0",
    "total_posts": 150,
    "last_updated": "2026-01-07T12:00:00+09:00",
    "categories": ["announcement", "development", "activity", "education", "ai_column", "business"]
  },
  "posts": [
    {
      "id": "2026-01-07-0900-ai_column-carousel-01",
      "datetime": "2026-01-07T09:00:00+09:00",
      "type": "carousel",
      "category": "ai_column",
      "status": "published",
      "title": "Gemini 2.5の新機能",
      "caption": "...",
      "hashtags": ["#AI", "#Gemini"],
      "media": [
        {"kind": "image", "src": "assets/img/posts/...", "alt": "..."}
      ],
      "engagement": {
        "likes": 0,
        "comments": 0,
        "saves": 0,
        "shares": 0
      },
      "staff": {
        "name": "高崎翔太",
        "role": "代表・講師"
      }
    }
  ],
  "scheduled": [
    {
      "id": "...",
      "scheduled_datetime": "2026-01-08T09:00:00+09:00",
      "status": "scheduled"
    }
  ],
  "drafts": []
}
```

## 表示モード

### 1. Grid View（デフォルト）
- 3カラムグリッド（Instagramプロフィール風）
- 最新投稿が左上
- 無限スクロール
- カテゴリフィルター

### 2. Feed View
- 1カラム（Instagramフィード風）
- 投稿詳細表示
- いいね・コメント表示
- スワイプでカルーセル

### 3. Category View
- カテゴリ別タブ
- ハイライトと連動

## 自動投稿フロー

```
Daily Workflow
     │
     ▼
┌─────────────┐
│ 1. リサーチ  │ Gemini API
└─────────────┘
     │
     ▼
┌─────────────┐
│ 2. コンテンツ │ 5シーン生成
│    生成     │
└─────────────┘
     │
     ▼
┌─────────────┐
│ 3. 画像生成  │ 4枚 + サンクス
└─────────────┘
     │
     ▼
┌─────────────────────────────────────┐
│ 4. posts.json に追加（上書きではない）│ ← 蓄積ポイント
└─────────────────────────────────────┘
     │
     ▼
┌─────────────┐
│ 5. Git Push │ GitHub Pages更新
└─────────────┘
     │
     ▼
┌─────────────┐
│ 6. レポート  │ 日次レポート生成
└─────────────┘
```

## コンポーネント

### Header
- ロゴ
- 表示切替（Grid/Feed）
- カテゴリフィルター

### Stories Bar
- 最新投稿のサムネイル
- カテゴリ別ハイライト

### Post Grid
- 3カラムレイアウト
- 4:5比率サムネイル
- ホバーでいいね数表示
- カルーセルアイコン

### Post Modal
- カルーセル表示
- キャプション
- ハッシュタグ
- 投稿日時
- CTAボタン

### Infinite Scroll
- 12投稿ずつ読み込み
- スクロール位置保持
- ローディングインジケーター

## API設計（将来拡張）

```
GET  /api/posts              全投稿取得
GET  /api/posts?category=ai  カテゴリ絞り込み
GET  /api/posts?page=2       ページネーション
GET  /api/posts/:id          個別投稿
POST /api/posts              新規投稿（Webhook）
```

## 技術スタック

- **Frontend**: HTML/CSS/Vanilla JS
- **Hosting**: GitHub Pages
- **Backend**: Python (Gemini API)
- **Database**: JSON (posts.json)
- **CI/CD**: GitHub Actions（将来）

## Instagram 2025 対応

- 4:5 (1080x1350) フォーマット
- ダークモード (#121212)
- 虹色グラデーション（ストーリーリング）
- Instagramブルー (#0095f6)
